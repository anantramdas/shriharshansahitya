<!DOCTYPE html>
<html lang="hi">

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="width=device-width, initial-scale=0.86, maximum-scale=5.0, minimum-scale=0.86">
   <!-- site metas -->
   <title>श्री वैष्णव एकादशी निर्णय-पत्रम् |
      Ekadashi Vrat Chart
   </title>
   <meta name="description" content="Ekadashi Vrat Chart By Shri Ram Harshan Seva Sansthan Ayodhya">
   <meta name="author" content="">
   <!-- bootstrap css -->
   <link rel="stylesheet" href="css/bootstrap.min.css">
   <!-- style css -->
   <link rel="stylesheet" href="css/style.css">
   <!-- fevicon -->
   <link rel="icon" sizes="16x16 32x32 64x64" href="./favicon/favicon.ico">
   <link rel="icon" type="image/png" sizes="196x196" href="./favicon/favicon-192.png">
   <link rel="icon" type="image/png" sizes="160x160" href="./favicon/favicon-160.png">
   <link rel="icon" type="image/png" sizes="96x96" href="./favicon/favicon-96.png">
   <link rel="icon" type="image/png" sizes="64x64" href="./favicon/favicon-64.png">
   <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32.png">
   <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16.png">
   <link rel="apple-touch-icon" href="./favicon/favicon-57.png">
   <link rel="apple-touch-icon" sizes="114x114" href="./favicon/favicon-114.png">
   <link rel="apple-touch-icon" sizes="72x72" href="./favicon/favicon-72.png">
   <link rel="apple-touch-icon" sizes="144x144" href="./favicon/favicon-144.png">
   <link rel="apple-touch-icon" sizes="60x60" href="./favicon/favicon-60.png">
   <link rel="apple-touch-icon" sizes="120x120" href="./favicon/favicon-120.png">
   <link rel="apple-touch-icon" sizes="76x76" href="./favicon/favicon-76.png">
   <link rel="apple-touch-icon" sizes="152x152" href="./favicon/favicon-152.png">
   <link rel="apple-touch-icon" sizes="180x180" href="./favicon/favicon-180.png">
   <meta name="msapplication-TileColor" content="#FFFFFF">
   <meta name="msapplication-TileImage" content="./favicon/favicon-144.png">
   <meta name="msapplication-config" content="./favicon/browserconfig.xml">
   <!-- Tweaks for older IEs-->
   <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->

<body class="main-layout home_page">
   <!-- header -->
   <header class="header">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler01"
            aria-controls="navbarToggler01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarToggler01">
            <a class="navbar-brand text-white" href="#">श्री रामहर्षण सेवा संस्थान, अयोध्या</a>
            <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
               <li class="nav-item">
                  <a class="nav-link" href="#">परिचय</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#">साहित्य</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#">प्रवचन</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#">निर्णय पत्र</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#">आचार्य परम्परा</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#">सम्पर्क करें</a>
               </li>
            </ul>
         </div>
      </nav>
   </header>
   <!-- end header -->
   <div id = "chart" class="container-fluid">
   </div>
   <!-- footer -->
   <footer>
      
   </footer>
   <!-- end footer -->
   <script src="js/jquery.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
   <script src="js/nirnay_chart.js"></script>
   <script type="text/javascript">
      var chartHtml = '';
      var days = ['रवि', 'सोम', 'मंगल', 'बुध', 'गुरु', 'शुक्र', 'शनि'];
      var sortedDates = {};
      var sortedYears = new Set();
      $(document).ready(function () {
         var today = new Date();
         var isNext;
         for (var itemName in finalDates) {
            var item = finalDates[itemName];
            if (item.date) {
               for (var date of item.date) {
                  date = new Date(date);
                  sortedDates[date.getTime()] = sortedDates[date.getTime()] || [];
                  sortedYears.add(date.getFullYear());
                  sortedDates[date.getTime()].push({
                     name: itemName,
                     type: item.type,
                  });
               }
            }
         }
         sortedYears = Array.from(sortedYears);
         sortedYears.sort();
         sortedYears.reverse();
         var sortedDatesKeys = Object.keys(sortedDates);
         sortedDatesKeys.sort();
         for (var year of sortedYears) {
            chartHtml += `<hr class="hr-text" data-content="${replaceDigitsToHindi(year)}"><div class="d-flex justify-content-center flex-wrap">`;
            for (var dateStamp of sortedDatesKeys) {
               var itemArr = sortedDates[dateStamp];
               for (var item of itemArr) {
                  var itemDate = new Date(+dateStamp);
                  if (itemDate.getFullYear() == year) {
                     var itemName = item.name;
                     if (item.type == 'ekadashi') {
                        itemName += ' एकादशी';
                     }
                     var itemDay = days[itemDate.getDay()];
                     var upcomingDate = '';
                     var dateString = formatDate(itemDate);
                     var daysLeft = itemDate >= today ? Math.ceil((itemDate.getTime() - today.getTime())/(1000 * 3600 * 24)) : -1;
                     var daysArr = ['आज', 'कल', 'परसों']
                     if (!isNext && daysLeft >= 0 && daysLeft < 31) {
                        upcomingDate = daysLeft != 0 ? ' bg-warning text-dark' : ' bg-info text-white';
                        if (daysLeft > 0) {
                           isNext = true;
                        }
                     }
                     if (daysLeft > 2 && daysLeft < 31) {
                        daysLeft += ' दिन बाद';
                     } else {
                        daysLeft = daysArr[daysLeft] || '';
                     }
                     daysLeft = daysLeft ? `(${daysLeft})` : '';
                     chartHtml += `<div class='card text-center flat${upcomingDate}'>${itemName}<div class='text-dark'><small class='d-block'>${daysLeft}</small>${dateString}<br>${itemDay}वार</div></div>`;
                  }
               }
            }
            chartHtml += `</div>`;
         }
         $('#chart').html(chartHtml);
         setTimeout(function() {
            $('.card.bg-warning')[0].scrollIntoView({behavior: "smooth", block: "center", inline: "nearest"});
         }, 500);
      });
      var arrMonths = ["जनवरी","फ़रवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्टूबर","नवम्बर","दिसम्बर"];
      var arrDigits = ["०","१","२","३","४","५","६","७","८","९"];
      function formatDate(date) {
         return replaceDigitsToHindi(`${date.getDate()} ${arrMonths[date.getMonth()]} ${date.getFullYear()}`);
      }
      function replaceDigitsToHindi(str) {
         return str.toString().replace(/./g, function(char) {
            return arrDigits[char] || char;
         });
      }
   </script>
</body>

</html>